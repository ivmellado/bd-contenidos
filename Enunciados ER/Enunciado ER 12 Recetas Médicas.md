Como todos sabemos, la sanidad pública en España subvenciona una parte importante del precio de los medicamentos que compramos en las farmacias mediante receta. Como las competencias sanitarias están transferidas a las Comunidades Autónomas, son éstas las que deben realizar los pagos a cada farmacia ubicada en su comunidad, según las recetas que cada una haya dispensado. El SES nos ha encargado realizar un primer prototipo de la base de datos necesaria para su gestión simplificando bastante los datos reales, que son enormemente complejos. 

De cada farmacia se dispone del nombre, CIF dirección, municipio, provincia y cuenta bancaria. Cada farmacia tiene asignado lo que se denomina identificador de oficina farmacéutica (IOF), que no se repite en España. Además, nos han insistido que los datos de cada municipio y su provincia deben estar estandarizados y, por tanto, almacenados de manera independiente.  

La Agencia Española de Medicamentos y Productos Sanitarios proporciona toda la información sobre los medicamentos. Estos están identificados con un código único, tienen un nombre comercial, el laboratorio que lo fabrica (suponemos solo uno), la descripción del formato de presentación (si es comprimido, jarabe, sobres, etc., la cantidad que incluye y otros aspectos), un enlace al prospecto completo, el precio y el importe que va a ser subvencionado, y sus principios activos (es decir, sus componentes básicos, que pueden ser varios).  De los laboratorios debemos almacenar su nombre, CIF y dirección. Por otra parte, para cada principio activo existe un código único que lo identifica y se conoce su nombre y un resumen de sus características. El mismo principio activo podría estar presente en muchos medicamentos.  

Por otra parte, los medicamentos están clasificados en tipos (analgésicos, antiinflamatorios, antidepresivos, etc.). Esta tipificación desea estandarizarse teniendo en cuenta que un medicamento puede pertenecer a varios tipos. También hay que tener en cuenta que un medicamento puede ser incompatible con otros, por estar contraindicado, y esta información ha de reflejarse en la base de datos. 

Cuando a una persona se le da de alta en el sistema sanitario público se debe recoger información de su nombre y apellidos, un NIF o pasaporte (sea propio o de la persona de la que depende), fecha de nacimiento, sexo y teléfono. El sistema le asigna un código de identificación personal autonómico (CIP). Además, se la pasa a considerar como paciente y se le asigna un centro sanitario y un médico por defecto. Para simplificar, no almacenaremos ningún dato de la tarjeta sanitaria física que se le entrega. En esta fase inicial del diseño no está representada la restricción de que el médico asignado a un paciente debe estar adscrito al centro sanitario al que pertenece el paciente. 

Debemos recoger en nuestro sistema los datos de los centros sanitarios y los médicos. Los centros sanitarios están estandarizados con un código de centro, nombre, dirección, teléfono y municipio. Hay que tener en cuenta que todos los municipios tendrán, al menos, una farmacia, pero no todos los municipios puede que tengan, al menos, un centro sanitario. En cuanto a los médicos, se incluyen los mismos datos que para el resto de las personas y, además, su número de colegiado y especialidad, el centro sanitario donde están adscritos y desde qué fecha lo están. Dado que existe mucha rotación del personal médico en los centros, debe conocerse a qué centros ha estado adscrito cada médico y en qué periodos de tiempo, teniendo en cuenta que el mismo médico puede haber estado adscrito al mismo centro en distintos periodos de tiempo. 

Cuando una persona está enferma y debe ser tratada, el médico puede prescribirle una serie de medicamentos. Cada prescripción de un medicamento se identifica por el CIP de la persona y un número consecutivo para esa persona (como forma rápida de saber cuántos medicamentos se han prescrito a una sola persona) y se incluirá la fecha y hora de prescripción, el medicamento prescrito, la fecha inicio y fin del tratamiento, la dosis, el médico que realizó la prescripción y unas observaciones.  

   Una farmacia expide un medicamento prescrito mediante el dispensado de una receta electrónica (según las prescripciones activas que tiene asociada la persona). Esta receta electrónica tiene un código único de receta y una fecha. Hay que mantener la información de qué farmacia ha expedido el medicamento. Obviamente, hay que conocer también la persona (paciente), el médico prescriptor, el medicamento prescrito, la dosis, así como la fecha de prescripción. Pero debe tenerse en cuenta que estos últimos datos ya pueden obtenerse a partir de la prescripción y no deberían ser duplicados porque una receta electrónica deriva de una sola prescripción, pero una prescripción puede dar lugar a varias recetas electrónicas.   

1. Realiza un diagrama Entidad/Relación que represente estas especificaciones, mostrando en ese mismo diagrama los atributos e identificadores de TODAS las entidades y subrayando los identificadores. De la misma forma presenta las asociaciones con sus nombres y atributos correspondientes (el diagrama completo debe estar en una sola cara).